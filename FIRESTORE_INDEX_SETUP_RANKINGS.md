# Firestore 인덱스 설정 가이드 - rankings

랭킹 페이지에서 랭킹을 조회하기 위해 필요한 인덱스 설정 가이드입니다.

## 문제

랭킹 페이지에서 다음과 같은 오류가 발생합니다:
```
랭킹 조회를 위해 Firestore 인덱스가 필요합니다. Firebase 콘솔에서 인덱스를 생성해주세요.
```

이 오류는 `rankings` 컬렉션에서 `period`로 필터링하고 `totalExp`로 정렬하는 쿼리를 실행할 때 발생합니다.

## 해결 방법

### 방법 1: Firebase Console에서 수동 생성 (권장)

1. **[Firebase Console](https://console.firebase.google.com/)**에 접속합니다.
2. 프로젝트 `class-read-book`를 선택합니다.
3. 왼쪽 메뉴에서 **Firestore Database**를 클릭합니다.
4. 상단 탭에서 **인덱스**를 클릭합니다.
5. **인덱스 만들기** 버튼을 클릭합니다.
6. 다음 정보를 입력합니다:
   - **컬렉션 ID**: `rankings`
   - **쿼리 범위**: 컬렉션 (Collection)
   - **필드 추가**:
     - 필드: `period`, 정렬: **오름차순** (Ascending)
     - 필드: `totalExp`, 정렬: **내림차순** (Descending)
7. **만들기** 버튼을 클릭합니다.

### 방법 2: 오류 메시지의 링크 사용

1. 브라우저 콘솔(F12)을 열어 오류 메시지를 확인합니다.
2. 오류 메시지에 표시된 링크를 클릭합니다.
3. Firebase Console에서 인덱스 생성 페이지로 이동합니다.
4. **인덱스 만들기** 버튼을 클릭합니다.

## 필요한 인덱스

다음 인덱스가 필요합니다:

### rankings 컬렉션
- **필드**: 
  - `period` (오름차순)
  - `totalExp` (내림차순)
- **용도**: 기간별로 경험치 순으로 랭킹 조회

## 인덱스 생성 확인

1. Firebase Console의 **Firestore Database > 인덱스** 탭으로 이동합니다.
2. 생성한 인덱스가 목록에 표시되는지 확인합니다.
3. 상태가 **"사용 가능"** 또는 **"Enabled"**가 되면 정상적으로 작동합니다.

## 참고사항

- 인덱스 생성에는 보통 1-5분 정도 소요됩니다.
- 인덱스가 생성되는 동안에는 "Building" 상태로 표시됩니다.
- 인덱스 생성이 완료되면 자동으로 "Enabled"로 변경됩니다.
- 인덱스는 한 번만 생성하면 계속 사용됩니다.

## 문제 해결

### 인덱스가 생성되지 않는 경우
- Firebase Console에서 프로젝트가 올바르게 선택되어 있는지 확인
- 브라우저를 새로고침하고 다시 시도
- Firebase Console의 권한이 있는지 확인

### 여전히 오류가 발생하는 경우
- 브라우저 콘솔(F12)에서 정확한 오류 메시지 확인
- Firestore Database가 생성되어 있는지 확인
- Firestore 보안 규칙이 올바르게 설정되어 있는지 확인
- 인덱스 생성이 완료되었는지 확인 (상태가 "Enabled"여야 함)

